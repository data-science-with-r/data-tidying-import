{
  "hash": "02659837597bc114f96d5d3cc5c96e8e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Tidy Basketball\"\ntoc: true\nwebr:\n  packages: ['tidyverse', 'scales']\nfilters:\n  - webr\n---\n\n\n::: callout-important\nPlease reference the `Meet the toolkit: Programming exercises` in `course 1 (or refresher)` for information and instructions on how to interact with the programming exercise below.\n:::\n\n## Getting Started\n\n\n\n\n\n```{webr-r}\n#| context: setup\ndownload.file(\n  \"https://raw.githubusercontent.com/ElijahMeyer3/Coursera/main/data/trailblazer21.csv\",\n  \"blazer.csv\"\n)\n\noptions(readr.show_progress = FALSE)\n```\n\nThe Portland Trailblazers are a National Basketball Association (NBA) sports team. In this mini analysis, we will work with a dataset that has information on the points scored by 9 Portland Trailblazers players across the first 10 games of the 2021-2022 NBA season. If you would like to become more familiar with the game of basketball, please click [here](https://www.britannica.com/sports/basketball). If you would like more information on the Portland Trailblazers, please click [here](https://en.wikipedia.org/wiki/Portland_Trail_Blazers).\n\nA key to these data can be found below:\n\n| variable name | description                            |\n|---------------|----------------------------------------|\n| player        | name of player                         |\n| game1_home    | points scored on game 1 on home court  |\n| ...           | ...                                    |\n| game3_away    | points scored on game 3 on away court  |\n| ...           | ...                                    |\n| game10_home   | points scored on game 10 on home court |\n\nRead in the data below.\n\n```{webr-r}\n#| echo: false\nblazer <- read_csv(\"trailblazer21.csv\")\n```\n\n\n::: {.cell}\n\n:::\n\n\n### Packages\n\nWe'll use **tidyverse** for the majority of the analysis and **scales** for pretty plot labels later on.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(scales)\n```\n:::\n\n\n### Get to know the data\n\nUse `glimpse()` to get an overview (or \"glimpse\") of the data. How many rows and columns are in this dataset? In addition, make note of the types of variables you are working with.\n\n```{webr-r}\n# insert code here\n```\n\n::: callout-warning\nIf you receive the error [Error: object 'blazer' not found]{style=\"color:red;\"}, go back and read in your data above.\n:::\n\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(blazer)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 9\nColumns: 11\n$ player      <chr> \"Damian Lillard\", \"CJ McCollum\", \"Norman Powell\", \"Robert …\n$ game1_home  <dbl> 20, 24, 14, 8, 20, 5, 11, 2, 7\n$ game2_home  <dbl> 19, 28, 16, 6, 9, 5, 18, 8, 11\n$ game3_away  <dbl> 12, 20, NA, 0, 4, 8, 12, 5, 5\n$ game4_home  <dbl> 20, 25, NA, 3, 17, 10, 17, 8, 9\n$ game5_home  <dbl> 25, 14, 12, 9, 14, 9, 5, 3, 8\n$ game6_away  <dbl> 14, 25, 14, 6, 13, 6, 19, 8, 8\n$ game7_away  <dbl> 20, 20, 22, 0, 7, 0, 17, 7, 4\n$ game8_away  <dbl> 26, 21, 23, 6, 6, 7, 15, 0, 0\n$ game9_home  <dbl> 4, 27, 25, 19, 10, 0, 16, 2, 7\n$ game10_home <dbl> 25, 7, 13, 12, 15, 6, 10, 4, 8\n```\n\n\n:::\n:::\n\n\nThere are 9 rows and 11 columns in blazer dataset.\n\n`player` is a character variable; the remaining variables are doubles.\n:::\n\nSuppose you are asked to recreate the plot below...\n\n![](images/blazer_pic.png){fig-align=\"center\"}\n\nIdentify the variables you would need to use to recreate this plot. Can this plot be recreated with how the `blazer` dataset is currently formatted?\n\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\nVariables in the above plot include `player`, `game`, `location`, and `points`. This plot can not be recreated with how the `blazer` dataset is currently formatted.\n:::\n\nNow, think critically about how we could transform our `blazer` dataset to have the variables necessary to make the plot above. What would our new dataset have to look like? What R function(s) could we use to transform our data into what we need?\n\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\nWe have a `player` column in the dataset. In order to get a `game`, `location`, and `points`, we can use `pivot_longer()`, which will take this wide dataset and make it into a longer dataset. That is, we can bring the variable names of `game1_home`, `game2_home`, etc. into our dataset as values, which is needed to recreate the plot above.\n:::\n\nSee more information about `pivot_longer()` [here](https://tidyr.tidyverse.org/reference/pivot_longer.html). We are going to create our final dataset in steps. First use `pivot_longer()` to change our dataset that has 90 rows and 3 columns that are named player, game, and points.\n\n```{webr-r}\n# insert code here\n```\n\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\n\n::: {.cell}\n\n```{.r .cell-code}\nblazer |>\n  pivot_longer(\n    cols = -player,\n    names_to = \"game\",\n    values_to = \"points\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 90 × 3\n   player         game        points\n   <chr>          <chr>        <dbl>\n 1 Damian Lillard game1_home      20\n 2 Damian Lillard game2_home      19\n 3 Damian Lillard game3_away      12\n 4 Damian Lillard game4_home      20\n 5 Damian Lillard game5_home      25\n 6 Damian Lillard game6_away      14\n 7 Damian Lillard game7_away      20\n 8 Damian Lillard game8_away      26\n 9 Damian Lillard game9_home       4\n10 Damian Lillard game10_home     25\n# ℹ 80 more rows\n```\n\n\n:::\n:::\n\n:::\n\nWhat are the next steps we need to take to change our dataset to recreate the plot above?\n\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\nWe still need to:\n\n-   remove \"game\" text from the `game` column\n-   separate the numeric value of game from home/away\n-   create a location column\n:::\n\nRevisit the documentation for `pivot_longer()`. Add the argument `names_prefix` to your existing code above to remove the text \"game\" from the `game` column.\n\n```{webr-r}\n# insert code here\n```\n\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\n\n::: {.cell}\n\n```{.r .cell-code}\nblazer |>\n  pivot_longer(\n    cols = -player,\n    names_to = \"game\",\n    values_to = \"points\",\n    names_prefix = \"game\"\n  )\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 90 × 3\n   player         game    points\n   <chr>          <chr>    <dbl>\n 1 Damian Lillard 1_home      20\n 2 Damian Lillard 2_home      19\n 3 Damian Lillard 3_away      12\n 4 Damian Lillard 4_home      20\n 5 Damian Lillard 5_home      25\n 6 Damian Lillard 6_away      14\n 7 Damian Lillard 7_away      20\n 8 Damian Lillard 8_away      26\n 9 Damian Lillard 9_home       4\n10 Damian Lillard 10_home     25\n# ℹ 80 more rows\n```\n\n\n:::\n:::\n\n:::\n\nWe now need to separate the values away from the location in the `game` column. Please see the documentation on `separate_wider_delim` [here](https://tidyr.tidyverse.org/reference/separate_wider_delim.html). Add to your existing code to split the game number and game location into two columns. Call the new column `location`. Save and name this dataset as `blazer_long` to use in the next section.\n\n```{webr-r}\n# insert code here\n```\n\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\n\n::: {.cell}\n\n```{.r .cell-code}\nblazer_long <- blazer |>\n  pivot_longer(\n    cols = -player,\n    names_to = \"game\",\n    values_to = \"points\",\n    names_prefix = \"game\") |>\n    separate_wider_delim(game, delim = \"_\", names = c(\"game\", \"location\"))\n\nblazer_long\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 90 × 4\n   player         game  location points\n   <chr>          <chr> <chr>     <dbl>\n 1 Damian Lillard 1     home         20\n 2 Damian Lillard 2     home         19\n 3 Damian Lillard 3     away         12\n 4 Damian Lillard 4     home         20\n 5 Damian Lillard 5     home         25\n 6 Damian Lillard 6     away         14\n 7 Damian Lillard 7     away         20\n 8 Damian Lillard 8     away         26\n 9 Damian Lillard 9     home          4\n10 Damian Lillard 10    home         25\n# ℹ 80 more rows\n```\n\n\n:::\n:::\n\n:::\n\n### Summary statistics\n\nLet's use the new `blazer_long` dataset to calculate some summary statistics for the Portland Trailblazers to learn more about their performance for these 10 games!\n\n1.  Calculate the mean points scored across all players between home and away games.\n\n```{webr-r}\n# insert code here\n```\n\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\n\n::: {.cell}\n\n```{.r .cell-code}\nblazer_long |>\n  group_by(location) |>\n  summarize(mean_points = mean(points, na.rm = T))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 2\n  location mean_points\n  <chr>          <dbl>\n1 away            10.9\n2 home            12.2\n```\n\n\n:::\n:::\n\n:::\n\n2.  Now, calculate the mean points scored for the player `Damian Lillard` for both home and away games.\n\n```{webr-r}\n# insert code here\n```\n\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\n\n::: {.cell}\n\n```{.r .cell-code}\nblazer_long |>\n  filter(player == \"Damian Lillard\") |>\n  group_by(location) |>\n  summarize(mean_points = mean(points, na.rm = T))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 2\n  location mean_points\n  <chr>          <dbl>\n1 away            18  \n2 home            18.8\n```\n\n\n:::\n:::\n\n:::\n\n3.  Now, create a table that counts the number of times a player scored 15 points (or more) a game versus the number of times a player scored less than 15 points a game.\n\n```{webr-r}\n# insert code here\n```\n\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\n\n::: {.cell}\n\n```{.r .cell-code}\nblazer_long |>\n  mutate(points_cat = ifelse(points >= 15, \"yes\", \"no\")) |>\n  select(points_cat) |>\n  group_by(points_cat) |>\n  count()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 2\n# Groups:   points_cat [3]\n  points_cat     n\n  <chr>      <int>\n1 no            59\n2 yes           29\n3 <NA>           2\n```\n\n\n:::\n:::\n\n:::\n\n## Bonus Challange\n\nRecreate the plot, using the `blazer_long` dataset!\n\n![](images/blazer_pic.png){fig-align=\"center\"}\n\nHints: The code you start with makes sure that game is appropriately treated as a quantitative variable. You will learn more about data types in the following lessons! The plot above uses `theme_bw()`.\n\n```{webr-r}\nblazer_long |>\n  mutate(game = as.numeric(game)) |>\n  # insert code here\n```\n\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\n\n::: {.cell}\n\n```{.r .cell-code}\nblazer_long |>\n  mutate(game = as.numeric(game)) |>\n  ggplot(\n    aes(x = game, y = points, color = location, group = player)\n  ) +\n  geom_line() +\n  geom_point(shape = \"square\") +\n  facet_wrap(~player) +\n  scale_x_continuous(breaks = c(1:10)) +\n  theme_bw() +\n  labs(\n    x = \"Game\",\n    y = \"Points Scored\",\n    title = \"Points Scored Across 10 Games\",\n    subtitle = \"Portland Trailblazers (2021-2022 Season)\",\n    caption = \"https://www.basketball-reference.com/teams/POR/2021_games.html\"\n  )\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: Removed 2 rows containing missing values or values outside the scale range\n(`geom_point()`).\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](tidy_basketball_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n:::\n",
    "supporting": [
      "tidy_basketball_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}