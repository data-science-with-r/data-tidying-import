{
  "hash": "4f1da667a48e54d8a8d1b6e1031aa0a1",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: Tidy basketball\nformat: live-html\nengine: knitr\nwebr:\n  packages: \n    - tidyverse\n    - scales\n  cell-options:\n    autorun: false\n  resources:\n    - https://raw.githubusercontent.com/data-science-with-r/data-tidying-import/main/exercises/data/trailblazer21.csv\n---\n\n\n\n\n<!-- begin: webr fodder -->\n\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell edit='false'}\n```{webr}\n#| edit: false\n#| echo: false\n#| output: false\noptions(\"readr.edition\" = 1)\n```\n:::\n\n\n\n\n<!-- end: webr fodder -->\n\n## Packages\n\nWe will use the following the **tidyverse** package for data import, wrangling, and visualization in this programming exercise.\n\nLet's first load the package.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n\n\n\n## Data\n\nThe Portland Trailblazers are a National Basketball Association (NBA) sports team.\nIn this mini analysis, we will work with a dataset that has information on the points scored by 9 Portland Trailblazers players across the first 10 games of the 2021-2022 NBA season.\nIf you would like to become more familiar with the game of basketball, you can read [this Wikipedia article](https://en.wikipedia.org/wiki/Basketball).\nIf you would like more information on the Portland Trailblazers, you can find out more about them [on Wikipedia](https://en.wikipedia.org/wiki/Portland_Trail_Blazers) as well.\n\nA partial data dictionary is provided below.\n\n| variable name | description                            |\n|---------------|----------------------------------------|\n| `player`      | Name of player                         |\n| `game1_home`  | Points scored on game 1 on home court  |\n| ...           | ...                                    |\n| `game3_away`  | Points scored on game 3 on away court  |\n| ...           | ...                                    |\n| `game10_home` | Points scored on game 10 on home court |\n\nRead in the data by running the code below.\n\n\n\n\n::: {.cell}\n```{webr}\n#| label: load-data\nblazer <- read_csv(\"trailblazer21.csv\")\n```\n:::\n\n\n\n\n::: exercise\nUse `glimpse()` to get an overview (or \"glimpse\") of the data.\nHow many rows and columns are in this dataset?\nIn addition, make note of the types of variables you are working with.\n\n\n\n\n::: {.cell setup='true' exercise='ex_1'}\n```{webr}\n#| setup: true\n#| exercise: ex_1\nblazer <- read_csv(\"trailblazer21.csv\")\n```\n:::\n\n::: {.cell exercise='ex_1'}\n```{webr}\n#| exercise: ex_1\n___\n```\n:::\n\n\n\n\n::: {.solution exercise=\"ex_1\"}\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\nThere are 9 rows and 11 columns in blazer dataset.\n`player` is a character variable; the remaining variables are doubles.\n\n``` r\nglimpse(blazer)\n```\n:::\n:::\n:::\n\nSuppose you are asked to recreate the plot below.\n\n![](images/blazer-points.png){fig-align=\"center\"}\n\n::: exercise\nIdentify the variables you would need to use to recreate the above plot.\nCan this plot be recreated with the `blazer` dataset as it's currently formatted?\n\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\nVariables in the above plot include `player`, `game`, `location`, and `points`.\nThis plot can not be recreated with how the `blazer` dataset is currently formatted.\n:::\n:::\n\n## Reshaping data\n\n::: exercise\nNow, think critically about how we could transform our `blazer` dataset to include the variables necessary to make the plot above.\nWhat would our new dataset have to look like?\nWhat R function(s) could we use to transform our data into what we need?\n\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\nWe have a `player` column in the dataset.\nIn order to get a `game`, `location`, and `points`, we can use `pivot_longer()`, which will take this wide dataset and make it into a longer dataset.\nThat is, we can bring the variable names of `game1_home`, `game2_home`, etc. into our dataset as values, which is needed to recreate the plot above.\n:::\n:::\n\nTo accomplish this task, we'll use `pivot_longer()`.\n\n::: exercise\nUse `pivot_longer()` to reshape `blazer` into a longer data frame with three columns (`player`, `game`, and `points`) and 90 rows.\n\n\n\n\n::: {.cell setup='true' exercise='ex_2'}\n```{webr}\n#| setup: true\n#| exercise: ex_2\nblazer <- read_csv(\"trailblazer21.csv\")\n```\n:::\n\n::: {.cell exercise='ex_2'}\n```{webr}\n#| exercise: ex_2\nblazer |>\n  pivot_longer(\n    ___\n  )\n```\n:::\n\n\n\n\n::: {.hint exercise=\"ex_2\"}\n::: {.callout-note collapse=\"false\"}\n## Hint 1\n\nPivot all columns except for `player`.\n\n``` r\nblazer |>\n  pivot_longer(\n    cols = !player,\n    ___,\n    ___\n  )\n```\n:::\n:::\n\n::: {.hint exercise=\"ex_2\"}\n::: {.callout-note collapse=\"false\"}\n## Hint 2\n\nThe variable names from `blazer` should go to a new column called `game`.\nWe quote this text because it's not a column that yet exists in our dataset.\n\n``` r\nblazer |>\n  pivot_longer(\n    cols = !player,\n    names_to = \"game\",\n    ___\n  )\n```\n:::\n:::\n\n::: {.solution exercise=\"ex_2\"}\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\nThe values from `blazer` should go to a new column called `points`.\nWe quote this text as well because it's not a column that yet exists in our dataset.\n\n``` r\nblazer |>\n  pivot_longer(\n    cols = -player,\n    names_to = \"game\",\n    values_to = \"points\"\n  )\n```\n:::\n:::\n:::\n\n::: exercise\nWhat are the next steps we need to take to transform our dataset further to recreate the plot above?\n\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\nWe still need to:\n\n-   Remove the text string `\"game\"` from the `game` column.\n-   Separate the numeric value of game from location (home or away) and store these pieces of information in two separate columns.\n:::\n:::\n\n::: exercise\nRevisit the documentation for `pivot_longer()`.\nAdd the argument `names_prefix` to your existing code above to remove the text \"game\" from the `game` column.\n\n\n\n\n::: {.cell setup='true' exercise='ex_3'}\n```{webr}\n#| setup: true\n#| exercise: ex_3\nblazer <- read_csv(\"trailblazer21.csv\")\n```\n:::\n\n::: {.cell exercise='ex_3'}\n```{webr}\n#| exercise: ex_3\nblazer |>\n  pivot_longer(\n    cols = -player,\n    names_to = \"game\",\n    values_to = \"points\",\n    ___\n  )\n```\n:::\n\n\n\n\n::: {.solution exercise=\"ex_3\"}\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\nSet `names_prefix` to `\"game\"` to remove this text from the variable names when pivoting the data frame.\n\n``` r\nblazer |>\n  pivot_longer(\n    cols = -player,\n    names_to = \"game\",\n    values_to = \"points\",\n    names_prefix = \"game\"\n  )\n```\n:::\n:::\n:::\n\nNext, we need to separate the values away from the location in the `game` column.\nA handy function for accomplishing this task is `separate_wider_delim()`.\n\n::: exercise\nContinue building up your data transformation pipeline to add a new step using `separate_wider_delim()` to separate the game number and game location into two columns.\nCall these new columns `game_number` and `game_location`.\nSave the resulting data frame as `blazer_longer`.\n\n\n\n\n::: {.cell setup='true' exercise='ex_4'}\n```{webr}\n#| setup: true\n#| exercise: ex_4\nblazer <- read_csv(\"trailblazer21.csv\")\n```\n:::\n\n::: {.cell exercise='ex_4'}\n```{webr}\n#| exercise: ex_4\n___ <- blazer |>\n  pivot_longer(\n    cols = -player,\n    names_to = \"game\",\n    values_to = \"points\",\n    names_prefix = \"game\"\n  ) |>\n  ___\n\nblazer_longer\n```\n:::\n\n\n\n\n::: {.solution exercise=\"ex_4\"}\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\n``` r\nblazer_longer <- blazer |>\n  pivot_longer(\n    cols = -player,\n    names_to = \"game\",\n    values_to = \"points\",\n    names_prefix = \"game\"\n  ) |>\n  separate_wider_delim(game, delim = \"_\", names = c(\"game_number\", \"game_location\"))\n\nblazer_longer\n```\n:::\n:::\n:::\n\n## Summarizing data\n\nLet's use the newly created `blazer_longer` dataset to calculate some summary statistics for the Portland Trailblazers to learn more about their performance for these 10 games!\n\n::: exercise\nCalculate the mean points scored across all players between home and away games.\n\n\n\n\n::: {.cell setup='true' exercise='ex_5'}\n```{webr}\n#| setup: true\n#| exercise: ex_5\nblazer <- read_csv(\"trailblazer21.csv\")\n\nblazer_longer <- blazer |>\n  pivot_longer(\n    cols = -player,\n    names_to = \"game\",\n    values_to = \"points\",\n    names_prefix = \"game\"\n  ) |>\n  separate_wider_delim(game, delim = \"_\", names = c(\"game_number\", \"game_location\"))\n```\n:::\n\n::: {.cell exercise='ex_5'}\n```{webr}\n#| exercise: ex_5\nblazer_longer |>\n  ___\n```\n:::\n\n\n\n\n::: {.hint exercise=\"ex_5\"}\n::: {.callout-note collapse=\"false\"}\n## Hint\n\nThis sounds like a `group_by()` \\|\\> `summarize()` task!\n:::\n:::\n\n::: {.solution exercise=\"ex_5\"}\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\n`group_by(game_location)` and then `summarize()` to find the mean number of points for each type of game location (home and away).\n\n``` r\nblazer_longer |>\n  group_by(game_location) |>\n  summarize(mean_points = mean(points, na.rm = T))\n```\n:::\n:::\n:::\n\n::: exercise\nNext, calculate the mean points scored by the player `Damian Lillard` for both home and away games.\n\n\n\n\n::: {.cell setup='true' exercise='ex_6'}\n```{webr}\n#| setup: true\n#| exercise: ex_6\nblazer <- read_csv(\"trailblazer21.csv\")\n\nblazer_longer <- blazer |>\n  pivot_longer(\n    cols = -player,\n    names_to = \"game\",\n    values_to = \"points\",\n    names_prefix = \"game\"\n  ) |>\n  separate_wider_delim(game, delim = \"_\", names = c(\"game_number\", \"game_location\"))\n```\n:::\n\n::: {.cell exercise='ex_6'}\n```{webr}\n#| exercise: ex_6\nblazer_longer |>\n  ___\n```\n:::\n\n\n\n\n::: {.hint exercise=\"ex_6\"}\n::: {.callout-note collapse=\"false\"}\n## Hint\n\nFilter for the player first!\n:::\n:::\n\n::: {.solution exercise=\"ex_6\"}\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\nFilter for the player first, and then use the same `group_by()` and `summarize()` steps from the previous exercise.\n\n``` r\nblazer_longer |>\n  filter(player == \"Damian Lillard\") |>\n  group_by(location) |>\n  summarize(mean_points = mean(points, na.rm = T))\n```\n:::\n:::\n:::\n\n::: exercise\nFor each player, calculate how many times they scored 15 points or more per game and how many times they scored fewer than 15 points per game.\n\n\n\n\n::: {.cell setup='true' exercise='ex_7'}\n```{webr}\n#| setup: true\n#| exercise: ex_7\nblazer <- read_csv(\"trailblazer21.csv\")\n\nblazer_longer <- blazer |>\n  pivot_longer(\n    cols = -player,\n    names_to = \"game\",\n    values_to = \"points\",\n    names_prefix = \"game\"\n  ) |>\n  separate_wider_delim(game, delim = \"_\", names = c(\"game_number\", \"game_location\"))\n```\n:::\n\n::: {.cell exercise='ex_7'}\n```{webr}\n#| exercise: ex_7\nblazer_longer |>\n  ___\n```\n:::\n\n\n\n\n::: {.solution exercise=\"ex_7\"}\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\n``` r\nblazer_longer |>\n  mutate(points_15 = ifelse(points >= 15, \"15 or more\", \"Fewer than 15\")) |>\n  count(player, points_15)\n```\n:::\n:::\n:::\n\n## Visualizing data\n\n::: exercise\nRecreate the following plot using the `blazer_longer` dataset!\n\n![](images/blazer-points.png){fig-align=\"center\"}\n\n\n\n\n::: {.cell setup='true' exercise='ex_8'}\n```{webr}\n#| setup: true\n#| exercise: ex_8\nblazer <- read_csv(\"trailblazer21.csv\")\n\nblazer_longer <- blazer |>\n  pivot_longer(\n    cols = -player,\n    names_to = \"game\",\n    values_to = \"points\",\n    names_prefix = \"game\"\n  ) |>\n  separate_wider_delim(game, delim = \"_\", names = c(\"game_number\", \"game_location\"))\n```\n:::\n\n::: {.cell exercise='ex_8'}\n```{webr}\n#| exercise: ex_8\nblazer_longer |>\n  ___\n```\n:::\n\n\n\n\n::: {.hint exercise=\"ex_8\"}\n::: {.callout-note collapse=\"false\"}\n## Hint 1\n\n`game` needs to be a numerical variable, so start by fixing that first!\n\n``` r\nblazer_longer |>\n  mutate(game = as.numeric(game)) |>\n  ___\n```\n:::\n:::\n\n::: {.hint exercise=\"ex_8\"}\n::: {.callout-note collapse=\"false\"}\n## Hint 2\n\nThe plot is `facet_wrap`ped by player.\n\n``` r\nblazer_longer |>\n  mutate(game = as.numeric(game)) |>\n  ggplot(___) |>\n  ___ |>\n  facet_wrap(~player) |>\n  ___\n```\n:::\n:::\n\n::: {.hint exercise=\"ex_8\"}\n::: {.callout-note collapse=\"false\"}\n## Hint 3\n\nThe plot uses `theme_bw()`.\n\n``` r\nblazer_longer |>\n  mutate(game = as.numeric(game)) |>\n  ggplot(___) |>\n  ___ |>\n  facet_wrap(~player) |>\n  ___ |>\n  theme_bw()\n```\n:::\n:::\n\n::: {.solution exercise=\"ex_8\"}\n::: {.callout-tip collapse=\"true\"}\n## Solution\n\nInstead of running the entire solution at once, run it one line at a time to see how the plot develops!\n\n``` r\nblazer_longer |>\n  mutate(game_number = as.numeric(game_number)) |>\n  ggplot(\n    aes(\n      x = game_number, y = points, \n      color = game_location, group = player\n    )\n  ) +\n  geom_line() +\n  geom_point(shape = \"square\") +\n  facet_wrap(~player) +\n  scale_x_continuous(breaks = c(1:10)) +\n  theme_bw() +\n  labs(\n    x = \"Game\",\n    y = \"Points scored\",\n    color = \"Location\",\n    title = \"Points scored across 10 games\",\n    subtitle = \"Portland Trailblazers (2021-2022 Season)\",\n    caption = \"https://www.basketball-reference.com/teams/POR/2021_games.html\"\n  )\n```\n:::\n:::\n:::\n",
    "supporting": [
      "tidy-basketball_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}